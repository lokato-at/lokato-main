Voraussetzungen (einmalig):

Raspberry Pi mit Internet
Docker + Docker Compose installiert
PHP + Composer installiert
Node + npm installiert
Repository lokato-platform vorhanden




Terminal 1 – Docker Services starten (Mosquitto + MySQL):

cd ~/lokato-platform/docker
docker compose down
docker compose up -d


Prüfen:

docker ps


Man muss mindestens sehen:

lokato-mosquitto
lokato-mysql




Terminal 2 – Backend vorbereiten (Laravel)

cd ~/lokato-platform/backend


1. Abhängigkeiten installieren (wichtig nach Pull!)

composer install


2. Cache zurücksetzen

php artisan optimize:clear
php artisan config:clear
php artisan config:cache


3. Datenbank neu aufsetzen

php artisan migrate:reset
php artisan migrate --seed




Terminal 3 – Backend HTTP-Server starten

cd ~/lokato-platform/backend
php artisan serve --host=0.0.0.0 --port=8001


Erfolgreich wenn:

Server running on http://0.0.0.0:8001

Der Server muss laufen bleiben.




Terminal 4 – MQTT Scan Listener starten:


cd ~/lokato-platform/backend
php artisan mqtt:subscribe --debug


Man muss sehen:

Subscribing to /api/v1/scan


Und bei Scans vom ESP32:

MQTT RECEIVED /api/v1/scan:
{"device_key":"RaspberryChild02","tracker_uid":"0X..."}


Das ist der Beweis, dass:

ESP32 sendet
Mosquitto empfängt
Backend hört zu
